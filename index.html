<!DOCTYPE html>
<html lang="ms">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Warung Rasa Padu</title>

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
body { font-family: 'Poppins', sans-serif; background:#fffaf0; }
</style>
</head>

<body>

<!-- ================= HEADER ================= -->
<div class="p-6 bg-orange-600 text-white text-center">
  <h1 class="text-3xl font-bold">Warung Rasa Padu</h1>
  <p>Pilih menu & buat pesanan</p>
</div>

<!-- ================= MENU ================= -->
<div class="p-6 grid grid-cols-2 md:grid-cols-3 gap-4" id="menu">
</div>

<!-- ================= CART ================= -->
<div class="fixed bottom-0 left-0 right-0 bg-white border-t p-4">
  <div id="cartItems" class="text-sm mb-2"></div>
  <div class="flex justify-between font-bold">
    <span>Jumlah:</span>
    <span id="totalPrice">RM 0.00</span>
  </div>
  <button onclick="sendOrder()" class="w-full mt-3 bg-orange-600 text-white py-3 rounded-lg font-bold">
    Hantar Pesanan
  </button>
</div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxcTZL8jzhfQaT7ZZ1gdrnUnxyuUgNgG7Bm9sTAuA9NFnp41fZBpYv-Ya8SI8XHvSPiSQ/exec";

const menuData = [
  {name:"Nasi Lemak", price:6},
  {name:"Nasi Goreng", price:7},
  {name:"Mee Goreng", price:7},
  {name:"Ayam Goreng", price:8},
  {name:"Teh Ais", price:3},
  {name:"Kopi O", price:3}
];

let cart = [];

function renderMenu(){
  const el = document.getElementById("menu");
  el.innerHTML = "";
  menuData.forEach(item=>{
    el.innerHTML += `
      <div class="bg-white p-4 rounded shadow">
        <h3 class="font-bold">${item.name}</h3>
        <p>RM ${item.price}</p>
        <button onclick="addItem('${item.name}', ${item.price})"
          class="mt-2 bg-orange-500 text-white w-full py-2 rounded">
          Tambah
        </button>
      </div>
    `;
  });
}

function addItem(name, price){
  cart.push({name, price});
  updateCart();
}

function updateCart(){
  const box = document.getElementById("cartItems");
  let total = 0;
  box.innerHTML = "";
  cart.forEach(item=>{
    total += item.price;
    box.innerHTML += `<div>${item.name} - RM ${item.price}</div>`;
  });
  document.getElementById("totalPrice").innerText = "RM " + total.toFixed(2);
}

function sendOrder(){
  if(cart.length === 0){
    alert("Tiada item dalam troli");
    return;
  }

  const payload = {
    menu: cart.map(i => i.name).join(", "),
    harga: cart.reduce((a,b)=>a+b.price,0),
    kuantiti: cart.length,
    jumlah: cart.reduce((a,b)=>a+b.price,0),
    timestamp: new Date().toISOString()
  };

  fetch(SCRIPT_URL, {
    method: "POST",
    mode: "no-cors",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify(payload)
  });

  alert("Pesanan berjaya dihantar!");
  cart = [];
  updateCart();
}

renderMenu();
</script>

</body>
</html>
